/*
* Kendo UI v2012.1.124 (http://kendoui.com)
* Copyright 2012 Telerik AD. All rights reserved.
*
* Kendo UI commercial licenses may be obtained at http://kendoui.com/license.
* If you do not own a commercial license, this file shall be governed by the
* GNU General Public License (GPL) version 3. For GPL requirements, please
* review: http://www.gnu.org/copyleft/gpl.html
*/

(function(a,b){var c=kendo.mobile,d=c.ui,e=a.proxy,f=kendo.roleSelector,g=d.Widget,h=10,i=kendo.Class.extend({init:function(a,b){var c=this;c.move=a,c.timer=0,c.tickProxy=e(c.tick,c),c.callback=b},animate:function(){this.intervalID=setInterval(this.tickProxy,h)},stop:function(){clearInterval(this.intervalID),this.timer=0},moveTo:function(a){var b=this,c=b.move;b.initialX=c.x,b.initialY=c.y,b.deltaX=a.x-b.initialX,b.deltaY=a.y-b.initialY,b.duration=a.duration||300,b.ease=b.easeProxy(a.ease||j.easeOutQuad),b.animate()},easeProxy:function(a){var b=this;return function(){b.move.moveTo(a(b.timer,b.initialX,b.deltaX,b.duration),a(b.timer,b.initialY,b.deltaY,b.duration))}},tick:function(){var a=this;a.timer+=h,a.ease(),a.timer===a.duration&&(a.stop(),this.callback())}}),j={easeOutExpo:function(a,b,c,d){return a==d?b+c:c*(-Math.pow(2,-10*a/d)+1)+b},easeOutBack:function(a,c,d,e,f){f==b&&(f=1.70158);return d*((a=a/e-1)*a*((f+1)*a+f)+1)+c}},k="km-current-page",l=g.extend({init:function(b,d){var f=this;g.fn.init.call(f,b,d),b=f.element,b.wrapInner("<div/>").addClass("km-scrollview").append('<ol class="km-pages"/>'),f.inner=b.children().first(),f.pager=b.children().last(),f.page=0,f.move=new c.Move(f.inner),f.inertia=new i(f.move,function(){f.page=-f.move.x/f.width,f._updatePage()}),f.swipe=new c.Swipe(b,{start:function(){f.inertia.stop()},end:a.proxy(f._swipeEnd,f)}),f.draggable=new c.Draggable({ignoreY:!0,minY:0,swipe:f.swipe,move:f.move}),f.calculateDimensions(),a(window).bind("orientationchange",e(f.calculateDimensions,f))},options:{name:"ScrollView",duration:300,velocityThreshold:1,bounceVelocityThreshold:2.5},viewShow:function(a){this.calculateDimensions()},calculateDimensions:function(){var a=this,b=a.width=a.element.width(),c="",d,e;a.page=-a.move.x/b,d=a.element[0].scrollWidth+a.page*b,e=a.pages=Math.ceil(d/b),a.minSnap=-(e-1)*b,a.maxSnap=0,a.draggable.options.minX=b-d;for(var f=0;f<e;f++)c+="<li/>";a.pager.html(c),a._updatePage()},_swipeEnd:function(a){var b=this,c=a.x.velocity,d=b.options,e=d.velocityThreshold,f,g=Math.round,h=j.easeOutExpo;c>e?g=Math.ceil:c<-e&&(g=Math.floor),f=Math.max(b.minSnap,Math.min(g(b.move.x/b.width)*b.width,b.maxSnap)),Math.abs(c)>d.bounceVelocityThreshold&&(h=j.easeOutBack),b.inertia.moveTo({x:f,y:0,duration:d.duration,ease:h})},_updatePage:function(){var a=this,b=a.pager;b.children().removeClass(k),b.find(":nth-child("+(a.page+1)+")").addClass(k)}});d.plugin(l)})(jQuery)