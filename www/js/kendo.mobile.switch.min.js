/*
* Kendo UI v2012.1.124 (http://kendoui.com)
* Copyright 2012 Telerik AD. All rights reserved.
*
* Kendo UI commercial licenses may be obtained at http://kendoui.com/license.
* If you do not own a commercial license, this file shall be governed by the
* GNU General Public License (GPL) version 3. For GPL requirements, please
* review: http://www.gnu.org/copyleft/gpl.html
*/

(function(a,b){function s(a,b,c){return Math.max(b,Math.min(c,a))}function r(a){a.preventDefault(),a.stopPropagation()}var c=window.kendo,d=c.mobile.ui,e=d.Widget,f=c.support,g="change",h="km-switch-on",i="km-switch-off",j="margin-left",k=f.mousedown,l=f.mouseup,m=f.mousemove,n=f.transitions.css+"transform",o=a(document),p=a.extend,q=a.proxy,t=e.extend({init:function(a,d){var f=this,h,i,j;e.fn.init.call(f,a,d),f._wrapper(),f._background(),f._handle(),d=f.options,a=f.element.data(c.attr("role"),"switch"),a[0].type="checkbox",j=f.handle.outerWidth(),f.halfWidth=j/2,f.width=h=f.wrapper.outerWidth(),f.snapPart=h-j,f.constrain=h-f.halfWidth,f._visibleBack=!0,f._moveProxy=q(f._move,f),f._stopProxy=q(f._stop,f),f.bind([g],d),i=d.checked,i===b&&(i=a[0].checked),f.toggle(i)},options:{name:"Switch",onLabel:"ON",offLabel:"OFF"},toggle:function(a){var c=this,d=c.element[0];a===b&&(a=!d.checked),d.checked=a,c._position(a*c.snapPart,a?0:c.origin),c.handle.toggleClass(h,a).toggleClass(i,!a)},_active:function(a){this.handle.toggleClass("km-state-active",a.type==k)},_location:function(a){return c.touchLocation(a).x-this.wrapper.offset().left},_move:function(a){var b=this,c=s(b._location(a),b.halfWidth,b.constrain),d=c-b.halfWidth;b._position(d,b.origin+d)},_position:function(a,b){var c=this;c.handle.css(n,"translatex("+a+"px)"),c._visibleBack&&c.background.css(j,b)},_start:function(a){var b=this;b._visibleBack=b.background.is(":visible"),b._initial=b._location(a),o.bind(m,b._moveProxy).bind(l+" mouseleave",b._stopProxy),r(a)},_stop:function(a){var b=this,c=b._location(a),d;Math.abs(b._initial-c)<=2?d=!b.element[0].checked:d=c>b.width/2,b._toggle(d),o.unbind(m,b._moveProxy).unbind(l+" mouseleave",b._stopProxy),r(a)},_toggle:function(a){var b=this,c=b.handle,d=b.element[0],e=d.checked,f;c.toggleClass(h,a).toggleClass(i,!a),c.data("animating")||(f=a*b.snapPart,b.background.kendoStop(!0,!0).kendoAnimate({effects:"slideMargin",offset:f,reverse:!a,axis:"left",duration:200}),c.kendoStop(!0,!0).kendoAnimate({effects:"slideTo",duration:200,offset:f+"px,0",complete:function(){e!==a&&(d.checked=a,b.trigger(g,{checked:a}))}}))},_background:function(){var b=this,c;c=a("<span class='km-switch-wrapper'><span class='km-switch-background'></span></span>").appendTo(b.wrapper).children(".km-switch-background"),b.origin=parseInt(c.css(j),10),c.data("origin",b.origin),b.background=c},_handle:function(){var b=this,c=b.options;b.handle=a("<span class='km-switch-container'><span class='km-switch-handle' /></span>").appendTo(b.wrapper).children(".km-switch-handle").bind(k+" "+l,q(b._active,b)),b.handle.append('<span class="km-switch-label-on">'+c.onLabel+'</span><span class="km-switch-label-off">'+c.offLabel+"</span>")},_wrapper:function(){var a=this,b=a.element,c=b.parent("label");c[0]||(c=b.wrap("<label />").parent()),a.wrapper=c.addClass("km-switch").bind(k,q(a._start,a))}});d.plugin(t)})(jQuery)